# ========== db.properties ==========
# 데이터베이스 연결 설정
db.driver=com.mysql.cj.jdbc.Driver
db.url=jdbc:mysql://localhost:3306/store_map_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
db.username=root
db.password=yourpassword

# Connection Pool 설정
db.pool.maxSize=20
db.pool.minIdle=5
db.pool.maxWait=30000
db.pool.validationQuery=SELECT 1

# ========== application.properties ==========
# 애플리케이션 설정
app.name=관문상가시장 관리 시스템
app.version=1.0.0
app.encoding=UTF-8

# 파일 업로드 설정
upload.directory=uploads/stores
upload.maxFileSize=5242880
upload.maxRequestSize=20971520
upload.allowedExtensions=jpg,jpeg,png,gif,webp

# 세션 설정
session.timeout=1800
session.cookieName=STOREMAP_SESSION

# 로그 설정
log.level=INFO
log.directory=logs
log.maxFileSize=10MB
log.maxHistory=30

# 지도 이미지 설정
map.defaultImage=/static/images/gwanmun_market_map.jpg
map.defaultWidth=1920
map.defaultHeight=1080

# API 설정
api.rateLimit.enabled=false
api.rateLimit.maxRequests=100
api.rateLimit.timeWindow=60

# ========== logback.xml ==========
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <!-- 콘솔 출력 설정 -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>
    
    <!-- 파일 출력 설정 -->
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/storeMap.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/storeMap.%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>30</maxHistory>
            <totalSizeCap>1GB</totalSizeCap>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>
    
    <!-- 에러 로그 파일 -->
    <appender name="ERROR_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/error.log</file>
        <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
            <level>ERROR</level>
        </filter>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/error.%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>
    
    <!-- 로거 설정 -->
    <logger name="com.storeMap" level="DEBUG"/>
    <logger name="com.zaxxer.hikari" level="INFO"/>
    <logger name="org.apache" level="WARN"/>
    
    <!-- 루트 로거 -->
    <root level="INFO">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
        <appender-ref ref="ERROR_FILE"/>
    </root>
</configuration>

# ========== context.xml (Tomcat 설정) ==========
<?xml version="1.0" encoding="UTF-8"?>
<Context>
    <!-- 데이터베이스 연결 풀 설정 (JNDI) -->
    <Resource name="jdbc/storeMapDB"
              auth="Container"
              type="javax.sql.DataSource"
              factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
              driverClassName="com.mysql.cj.jdbc.Driver"
              url="jdbc:mysql://localhost:3306/store_map_db?useSSL=false&amp;serverTimezone=Asia/Seoul&amp;characterEncoding=UTF-8"
              username="root"
              password="yourpassword"
              maxActive="20"
              maxIdle="10"
              minIdle="5"
              maxWait="10000"
              validationQuery="SELECT 1"
              testOnBorrow="true"
              testWhileIdle="true"
              timeBetweenEvictionRunsMillis="30000"
              removeAbandoned="true"
              removeAbandonedTimeout="60"
              logAbandoned="true"/>
    
    <!-- 세션 설정 -->
    <Manager pathname=""/>
    
    <!-- 리소스 캐싱 설정 -->
    <Resources cachingAllowed="true" cacheMaxSize="100000"/>
</Context>